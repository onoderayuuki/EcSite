<?php

$random = { 
    ["photographer":"Unsplash\Photo":private]=> NULL 
    ["parameters":"Unsplash\Endpoint":private]=> array(22) { 
        ["id"]=> string(11) "VrHA48aTsUQ" 
        ["created_at"]=> string(25) "2018-04-17T03:17:15-04:00" 
        ["updated_at"]=> string(25) "2021-06-03T20:03:36-04:00" 
        ["promoted_at"]=> NULL 
        ["width"]=> int(6000) 
        ["height"]=> int(4000) 
        ["color"]=> string(7) "#8c7359" 
        ["blur_hash"]=> string(28) "LAE.X_?HMIMw12NHIoRjI9NGT1x]" 
        ["description"]=> NULL 
        ["alt_description"]=> string(23) "two birds on the ground" 
        ***["urls"]=> array(5) {
            ["raw"]=> string(132) "https://images.unsplash.com/photo-1523949401498-2e8aefd791e5?ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA&ixlib=rb-1.2.1" 
            ["full"]=> string(165) "https://images.unsplash.com/photo-1523949401498-2e8aefd791e5?crop=entropy&cs=srgb&fm=jpg&ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA&ixlib=rb-1.2.1&q=85" 
            ["regular"]=> string(184) "https://images.unsplash.com/photo-1523949401498-2e8aefd791e5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA&ixlib=rb-1.2.1&q=80&w=1080" 
            ["small"]=> string(183) "https://images.unsplash.com/photo-1523949401498-2e8aefd791e5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA&ixlib=rb-1.2.1&q=80&w=400" 
            ["thumb"]=> string(183) "https://images.unsplash.com/photo-1523949401498-2e8aefd791e5?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA&ixlib=rb-1.2.1&q=80&w=200" 
            } 
        ["links"]=> array(4) {
             ["self"]=> string(43) "https://api.unsplash.com/photos/VrHA48aTsUQ" 
             ["html"]=> string(102) "https://unsplash.com/photos/VrHA48aTsUQ?utm_source=api_app&utm_medium=referral&utm_campaign=api-credit" 
            ["download"]=> string(111) "https://unsplash.com/photos/VrHA48aTsUQ/download?utm_source=api_app&utm_medium=referral&utm_campaign=api-credit" 
            ["download_location"]=> string(109) "https://api.unsplash.com/photos/VrHA48aTsUQ/download?ixid=MnwyMzYzODN8MHwxfHJhbmRvbXx8fHx8fHx8fDE2MjI3NzUxMjA" 
            } 
        ["categories"]=> array(0) { } 
        ["likes"]=> int(105) 
        ["liked_by_user"]=> bool(false) 
        ["current_user_collections"]=> array(0) { } 
        ["sponsorship"]=> NULL ["user"]=> array(18) { 
            ["id"]=> string(11) "RWFu3buoUS0" 
            ["updated_at"]=> string(25) "2021-06-03T11:10:36-04:00" 
            ["username"]=> string(12) "andy_brunner" 
            ["name"]=> string(12) "Andy Brunner" 
            ["first_name"]=> string(4) "Andy" 
            ["last_name"]=> string(7) "Brunner" 
            ["twitter_username"]=> string(11) "BrunnerAndy" 
            ["portfolio_url"]=> string(16) "http://abdata.ch" 
            ["bio"]=> string(213) "IT consultant for Internet, networks, security, Lotus Domino, Linux and Java. Development of customized solutions. Corporate training for administrators. Besides, I'm just another dust particle in the universe." 
            ["location"]=> string(20) "Zürich, Switzerland" 
            ["links"]=> array(7) { 
                ["self"]=> string(43) "https://api.unsplash.com/users/andy_brunner" 
                ["html"]=> string(97) "https://unsplash.com/@andy_brunner?utm_source=api_app&utm_medium=referral&utm_campaign=api-credit" 
                ["photos"]=> string(50) "https://api.unsplash.com/users/andy_brunner/photos" 
                ["likes"]=> string(49) "https://api.unsplash.com/users/andy_brunner/likes" 
                ["portfolio"]=> string(53) "https://api.unsplash.com/users/andy_brunner/portfolio" 
                ["following"]=> string(53) "https://api.unsplash.com/users/andy_brunner/following" 
                ["followers"]=> string(53) "https://api.unsplash.com/users/andy_brunner/followers" 
                } 
            ["profile_image"]=> array(3) { 
                ["small"]=> string(131) "https://images.unsplash.com/profile-1443246909724-93144c1b8992?ixlib=rb-1.2.1&q=80&fm=jpg&crop=faces&cs=tinysrgb&fit=crop&h=32&w=32" 
                ["medium"]=> string(131) "https://images.unsplash.com/profile-1443246909724-93144c1b8992?ixlib=rb-1.2.1&q=80&fm=jpg&crop=faces&cs=tinysrgb&fit=crop&h=64&w=64" 
                ["large"]=> string(133) "https://images.unsplash.com/profile-1443246909724-93144c1b8992?ixlib=rb-1.2.1&q=80&fm=jpg&crop=faces&cs=tinysrgb&fit=crop&h=128&w=128" 
                } 
            ["instagram_username"]=> NULL 
            ["total_collections"]=> int(2) 
            ["total_likes"]=> int(2) 
            ["total_photos"]=> int(55) 
            ["accepted_tos"]=> bool(false) 
            ["for_hire"]=> bool(false) 
            } 
        ["exif"]=> array(6) { 
            ["make"]=> string(17) "NIKON CORPORATION" 
            ["model"]=> string(11) "NIKON D5300" 
            ["exposure_time"]=> string(5) "1/640" 
            ["aperture"]=> string(3) "6.3" 
            ["focal_length"]=> string(5) "220.0" 
            ["iso"]=> int(450) 
            } 
        ["location"]=> array(5) { 
            ["title"]=> string(26) "Galapagos Islands, Ecuador" 
            ["name"]=> string(26) "Galapagos Islands, Ecuador" 
            ["city"]=> NULL 
            ["country"]=> string(7) "Ecuador" 
            ["position"]=> array(2) { 
                ["latitude"]=> float(-0.630925) 
                ["longitude"]=> float(-90.36351111) 
                } 
            } 
        ["views"]=> int(476240) 
        ["downloads"]=> int(2953) 
        } 
    };

// $test = (array)$random;
// var_dump(array_keys($test));
// echo '<br>';
// var_dump($test["Unsplash\Endpointparameters"]);
$test = json_decode($random);
var_dump($test);
// var_dump(array_slice($test, 2, 1, true));
// foreach ($test as $key => $value) {
//     echo $key;  // $keyにキーの文字が入っている
//     echo "'s value is ";
//     var_dump($value);  // $valueにデータが入っている
//     echo "
//    ";
//    }
// echo $test["Unsplash\Endpointparameters"];
// $test = json_decode(json_encode($random), true);
// $random =json_decode($random,true);
// echo ($random);
// var_dump(get_object_vars($random));
// var_dump($random);
// var_dump($random["urls"]);
// // Landing on the page for the first time, setup connection with private application details registered with unsplash and redirect user to authenticate
// if (!isset($_GET['code']) && !isset($_SESSION['token'])) {
//     \Unsplash\HttpClient::init([
//         'applicationId'	=> 'WtXaQuUo6QB9xPxsoqwCBLIWm0S1ImqGtDzbluWxlNI',
//         'secret'		=> 'WRqMevmuTh_xPpy31SUsI-_-FCtFrkz_2WrHTd5kyVA',
//         'callbackUrl'	=> 'http://localhost:8888/Moonlight/unsplash.php'
//     ]);
//     $httpClient = new \Unsplash\HttpClient();
//     $scopes = ['public'];
//     header("Location: ". $httpClient::$connection->getConnectionUrl($scopes));
//     exit;
// }

// Unsplash sends user back with ?code=XXX, use this code to generate AccessToken
// if (isset($_GET['code']) && !isset($_SESSION['token'])) {
//     \Unsplash\HttpClient::init([
//         'applicationId'	=> 'WtXaQuUo6QB9xPxsoqwCBLIWm0S1ImqGtDzbluWxlNI',
//         'secret'		=> 'WRqMevmuTh_xPpy31SUsI-_-FCtFrkz_2WrHTd5kyVA',
//         'callbackUrl'	=> 'http://localhost:8888/Moonlight'
//     ]);

//     try {
//         $token = \Unsplash\HttpClient::$connection->generateToken($_GET['code']);
//     } catch (Exception $e) {
//         print("Failed to generate access token: {$e->getMessage()}");
//         exit;
//     }

    // Store the access token, use this for future requests
    // $_SESSION['token'] = $token;
// }

// Send requests to Unsplash
// \Unsplash\HttpClient::init([
//     'applicationId'	=> 'WtXaQuUo6QB9xPxsoqwCBLIWm0S1ImqGtDzbluWxlNI',
//     'secret'		=> 'WRqMevmuTh_xPpy31SUsI-_-FCtFrkz_2WrHTd5kyVA',
//     'callbackUrl'	=> 'http://localhost:8888/Moonlight/unsplash.php'
// ], [
//     'access_token' => $_SESSION['token']->getToken(),
//     'expires_in' => 30000,
//     'refresh_token' => $_SESSION['token']->getRefreshToken()
// ]);

// $httpClient = new \Unsplash\HttpClient();
// $owner = $httpClient::$connection->getResourceOwner();

// print("Hello {$owner->getName()}, you have authenticated successfully");

// Or apply some optional filters by passing a key value array of filters
// $filters = [
//     'username' => 'andy_brunner',
//     'query'    => 'coffee',
//     'w'        => 100,
//     'h'        => 100
// ];
// \Unsplash\Photo::random($filters);

?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
</body>
</html>